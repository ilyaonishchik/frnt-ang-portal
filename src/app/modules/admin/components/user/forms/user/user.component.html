<form
  [formGroup]=formUser
  (change)='onChangeValues()'>
  <div class='p-fluid grid formgrid'>
    <div class='field col-fixed'>
      <p-avatar
        image='assets/img/avatars/default.png'
        size="xlarge"
        shape="circle">
      </p-avatar>
    </div>
    <div class='field col-5'>
      <label for='username'>Имя пользователя</label>
      <input
        id='username'
        type='text'
        pInputText
        formControlName='username'
        autofocus
        [readonly]=isReadOnlyProps
      >
      <ng-container
        *ngIf="(f['username'].dirty || f['username'].touched) && f['username'].invalid">
        <avs-input-validate [errors]="f['username'].errors"></avs-input-validate>
      </ng-container>
    </div>
    <div class='field col'>
      <label for='email'>Электронная почта</label>
      <input
        id='email'
        type='text'
        pInputText
        formControlName='email'
        [readonly]=isReadOnlyProps
      >
      <ng-container
        *ngIf="(f['email'].dirty || f['email'].touched) && f['email'].invalid">
        <avs-input-validate [errors]="f['email'].errors"></avs-input-validate>
      </ng-container>
    </div>
  </div>
  <div class='field'>
    <!--    <label for='tabs'>Дополнительные параметры</label>-->
    <p-tabView id='tabs'>
      <p-tabPanel
        header='Дополнительно'
      >
        <div class='field'>
          <label for='email'>Код подразделения</label>
          <input
            id='sd_id'
            type='text'
            pInputText
            formControlName='sd_id'
            [readonly]=isReadOnlyProps
          >
          <ng-container
            *ngIf="(f['sd_id'].dirty || f['sd_id'].touched) && f['sd_id'].invalid">
            <avs-input-validate [errors]="f['sd_id'].errors"></avs-input-validate>
          </ng-container>
        </div>
        <div class='field'>
          <label for='comment'>Описание</label>
          <textarea
            id='comment'
            pInputTextarea
            rows='3'
            cols='20'
            formControlName='comment'
            [readonly]=isReadOnlyProps>
          </textarea>
          <ng-container
            *ngIf="(f['comment'].dirty || f['comment'].touched) && f['comment'].invalid">
            <avs-input-validate [errors]="f['comment'].errors"></avs-input-validate>
          </ng-container>
        </div>

      </p-tabPanel>
      <p-tabPanel header='Роли'>
        <p-pickList
          [source]=sourceRoles
          [sourceStyle]="{'height':'10rem'}"
          [showSourceControls]=false
          sourceHeader='Доступные'
          sourceFilterPlaceholder='Поиск по имени'
          [target]=targetRoles
          [targetStyle]="{'height':'10rem'}"
          [showTargetControls]=false
          targetHeader='Выбранные'
          targetFilterPlaceholder='Поиск по имени'
          [dragdrop]=false
          [responsive]=true
          filterBy='code,name'
          [disabled]=isReadOnlyProps
        >
          <ng-template let-role pTemplate='item'>
            <div
              class='text-900 font-medium'
              [ngClass]="{'line-through': role.status == 0}"
            >{{role.code}}-{{role.name}}</div>
            <div class='text-600'>{{role.comment}}</div>
          </ng-template>
        </p-pickList>
      </p-tabPanel>
      <p-tabPanel header='Разрешения'>
        <p-pickList
          [source]=sourcePermissions
          [sourceStyle]="{'height':'10rem'}"
          [showSourceControls]=false
          sourceHeader='Доступные'
          sourceFilterPlaceholder='Поиск по имени'
          [target]=targetPermissions
          [targetStyle]="{'height':'10rem'}"
          [showTargetControls]=false
          targetHeader='Выбранные'
          targetFilterPlaceholder='Поиск по имени'
          [dragdrop]=false
          [responsive]=true
          filterBy='code,name'
          [disabled]=isReadOnlyProps
        >
          <ng-template let-permission pTemplate='item'>
            <div
              class='text-900 font-medium'
              [ngClass]="{'line-through': permission.status == 0}"
            >{{permission.code}}-{{permission.name}}</div>
            <div class='text-600'>{{permission.comment}}</div>
          </ng-template>
        </p-pickList>
      </p-tabPanel>
    </p-tabView>
  </div>
</form>

