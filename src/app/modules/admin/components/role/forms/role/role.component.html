<form [formGroup]=formRole
      (change)='onChangeValues()'>
  <div class='p-fluid grid formgrid'>
    <div class='field col-4'>
      <label for='code'>Код</label>
      <input
        id='code'
        type='text'
        pInputText
        formControlName='code'
        autofocus
        [readonly]=readOnlyProps
      >
      <ng-container
        *ngIf="(f['code'].dirty || f['code'].touched) && f['code'].invalid">
        <avs-validate-input [errors]="f['code'].errors"></avs-validate-input>
      </ng-container>
    </div>
    <div class='field col-8'>
      <label for='name'>Наименование</label>
      <input
        id='name'
        type='text'
        pInputText
        formControlName='name'
        [readonly]=readOnlyProps
      >
      <ng-container
        *ngIf="(f['name'].dirty || f['name'].touched) && f['name'].invalid">
        <avs-validate-input [errors]="f['name'].errors"></avs-validate-input>
      </ng-container>
    </div>
  </div>
  <div class='field'>
    <label for='comment'>Описание</label>
    <textarea
      id='comment'
      pInputTextarea
      rows='3'
      cols='20'
      formControlName='comment'
      [readonly]=readOnlyProps>
    </textarea>
    <ng-container
      *ngIf="(f['comment'].dirty || f['comment'].touched) && f['comment'].invalid">
      <avs-validate-input [errors]="f['comment'].errors"></avs-validate-input>
    </ng-container>
  </div>
  <div class='field'>
    <label for='tabs'>Дополнительные параметры</label>
    <p-tabView id='tabs'>
      <p-tabPanel header='Разрешения'>
        <p-pickList
          [source]=sourcePermissions
          [sourceStyle]="{'height':'10rem'}"
          [showSourceControls]=false
          sourceHeader='Доступные'
          sourceFilterPlaceholder='Поиск по имени'
          [target]=targetPermissions
          [targetStyle]="{'height':'10rem'}"
          [showTargetControls]=false
          targetHeader='Выбранные'
          targetFilterPlaceholder='Поиск по имени'
          [dragdrop]=false
          [responsive]=true
          filterBy='code,name'
          [disabled]=readOnlyProps
        >
          <ng-template let-permission pTemplate='item'>
            <div
              class='text-900 font-medium'
              [ngClass]="{'line-through': permission.status === 0}"
            >{{permission.code}}-{{permission.name}}</div>
            <div class='text-600'>{{permission.comment}}</div>
          </ng-template>
        </p-pickList>
      </p-tabPanel>
    </p-tabView>
  </div>
</form>
